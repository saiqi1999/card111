# 回合制卡牌战斗游戏

这是一个使用Godot引擎开发的回合制卡牌战斗游戏，灵感来源于《杀戮尖塔》(Slay the Spire)。游戏采用回合制战斗系统，玩家通过管理能量和卡牌来击败敌人。

## 游戏特点

- **回合制卡牌战斗**：每回合抽取卡牌，使用能量打出卡牌进行战斗
- **能量管理系统**：每回合获得固定能量，合理分配使用
- **多样化卡牌**：攻击、防御、技能等不同类型的卡牌
- **状态效果系统**：中毒、再生、力量、虚弱等多种状态效果
- **卡组管理**：管理抽牌堆、手牌和弃牌堆，构建自己的卡组

## 项目结构

```
├── assets/            # 游戏资源（图像、音频等）
│   ├── images/        # 游戏图像资源（卡牌、怪物、背景等）
├── scenes/            # Godot场景文件
│   ├── main.tscn      # 主游戏场景
│   ├── card.tscn      # 基础卡牌场景
│   ├── ui.tscn        # 用户界面场景
├── scripts/           # GDScript脚本文件
│   ├── main.gd        # 主游戏逻辑
│   ├── game_manager.gd # 游戏状态管理
│   ├── card_manager.gd # 卡牌管理系统
│   ├── player_manager.gd # 玩家状态管理
│   ├── card.gd        # 基础卡牌类
│   ├── cards/         # 具体卡牌实现
│       ├── strike.gd  # 打击卡牌
```

## 核心游戏机制

### 卡牌系统

游戏的核心是基于卡牌的战斗系统。玩家每回合抽取卡牌，并使用能量来打出这些卡牌。

- **卡牌基类**：`card.gd` 定义了所有卡牌的基本属性（名称、消耗、描述）和方法（拖拽、打出）
- **卡牌管理器**：`card_manager.gd` 负责管理牌库、手牌和弃牌堆，处理抽牌、洗牌和打出卡牌的逻辑
- **具体卡牌**：每种卡牌（如 `strike.gd`）继承自基类并实现自己的效果

目前实现的卡牌包括：
- `Strike` - 基础攻击卡，对目标造成6点伤害

### 玩家系统

玩家系统由 `player_manager.gd` 管理，负责玩家的生命值、能量和状态效果。

- **玩家属性**：最大生命值、当前生命值、最大能量、当前能量
- **能量管理**：每回合恢复能量，用于打出卡牌
- **状态效果**：支持多种状态效果，如中毒、再生、力量、虚弱等
- **UI显示**：更新生命值和能量的UI显示

### 游戏管理系统

游戏管理系统由 `game_manager.gd` 控制，负责游戏的整体流程和状态。

- **游戏状态**：菜单、游玩中、暂停、游戏结束等状态
- **玩家数据**：管理玩家的生命值、金币、牌库等数据
- **存档系统**：保存和加载游戏数据

### 回合系统

战斗是回合制的，玩家和敌人轮流行动。主要流程在 `main.gd` 中实现：

- **回合开始**：恢复能量，抽取卡牌，处理回合开始效果
- **玩家行动**：使用卡牌攻击敌人、获得护甲或使用特殊效果
- **回合结束**：处理回合结束效果，敌人行动

## 技术实现

### 信号系统

游戏大量使用Godot的信号系统进行组件间通信：

- **卡牌信号**：`card_played`、`card_hovered`、`card_clicked`
- **玩家信号**：`health_changed`、`energy_changed`、`player_died`
- **卡牌管理器信号**：`card_drawn`、`card_played`、`card_discarded`

### UI系统

游戏UI采用Godot的Control节点构建：

- **卡牌UI**：显示卡牌名称、消耗、描述和图像
- **玩家信息UI**：显示生命值和能量
- **回合控制UI**：结束回合按钮

## 如何运行

1. 确保已安装Godot 4.0或更高版本
2. 克隆或下载此仓库
3. 使用Godot打开项目文件夹
4. 点击运行按钮或按F5启动游戏

## 开发计划

- [x] 基本卡牌系统
- [x] 能量系统
- [x] 状态效果系统
- [ ] 敌人AI系统
- [ ] 更多卡牌类型
- [ ] 关卡进度系统
- [ ] 卡组构建界面
- [ ] 战斗奖励系统
- [ ] 优化UI和视觉效果

## 如何贡献

欢迎贡献！如果你想参与项目开发，可以：

1. Fork此仓库
2. 创建你的功能分支 (`git checkout -b feature/amazing-feature`)
3. 提交你的更改 (`git commit -m 'Add some amazing feature'`)
4. 推送到分支 (`git push origin feature/amazing-feature`)
5. 提交Pull Request

### 添加新卡牌

1. 在 `scripts/cards/` 目录下创建新的脚本文件，继承自 `card.gd`
2. 实现 `_ready()` 方法设置卡牌属性
3. 实现 `_apply_card_effect()` 方法定义卡牌效果

## 许可证

此项目采用MIT许可证 - 详见LICENSE文件
