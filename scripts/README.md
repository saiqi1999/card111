# 脚本文件夹 (Scripts)

此文件夹包含游戏中使用的所有脚本文件。

## 文件夹结构

- `cards/` - 卡牌系统相关脚本
- `ctrl/` - 控制器系统相关脚本
- `debug/` - 调试相关脚本
- `mobs/` - 怪物相关脚本
- `ui/` - UI组件相关脚本
- `utils/` - 全局工具相关脚本

## 脚本说明

### 调试脚本 (Debug)

`debug/button_handler.gd` 实现了一个简单的按钮点击事件处理器，当按钮被点击时会在控制台打印信息。

```gdscript
func _on_button_pressed():
    print("按钮被点击了！")
```

### 卡牌系统

卡牌系统脚本位于 `cards/` 子文件夹中，包含卡包基类、具体卡包实现和卡牌工具类。实现了完整的卡牌拖拽、堆叠、层级管理和智能点击逻辑。详细信息请参阅该文件夹中的README.md文件。

主要功能：
- 卡牌拖拽和移动动画
- 卡牌堆叠系统和连带拖拽
- 智能点击逻辑（点击不改变层级，拖拽才置顶）
- 多种卡牌类型支持（打击、防御、Want Slime、Basic Skill Pack）
- 卡牌池系统优化性能

### 天气系统

天气系统通过事件定时器实现动态天气变化，主要包含以下组件：

1. **事件管理器 (event_util.gd)**
   - 管理定时器和天气生成逻辑
   - 每120秒触发一次天气检查
   - 30%概率生成天气卡牌

2. **天气卡牌预制体**
   - `wind_card_pack.gd` - 刮风卡牌
   - `rain_card_pack.gd` - 下雨卡牌
   - 支持自动回收和特效触发

### 区域管理系统

区域管理系统由 `area_util.gd` 实现，提供以下功能：

1. **移动范围管理**
   - 相机移动范围控制
   - 卡牌移动范围限制
   - 边界检查和位置修正

2. **工具方法**
   - `clamp_camera_position` - 限制相机位置
   - `clamp_card_position` - 限制卡牌位置
   - `reset_bounds` - 重置移动范围

### 控制器系统

控制器系统脚本位于 `ctrl/` 子文件夹中，实现了可交互的控制器界面功能。详细信息请参阅该文件夹中的README.md文件。

### UI组件系统

UI组件系统脚本位于 `ui/` 子文件夹中，包含各种可复用的UI组件。

主要组件：
- `crafting_progress_bar.gd` - 合成进度条组件，提供可视化的合成进度显示
- 支持自定义样式和位置调整
- 自动生命周期管理
- 实时进度更新

### 怪物系统

怪物系统脚本将位于 `mobs/` 子文件夹中，目前尚未实现。

### 全局工具系统

全局工具系统脚本位于 `utils/` 子文件夹中，提供了一系列全局可用的工具方法和加载器。详细信息请参阅该文件夹中的README.md文件。

## 开发指南

### 添加新脚本

添加新脚本时，请遵循以下规范：

1. 使用有意义的文件名，采用snake_case命名法
2. 在脚本开头添加类注释，说明脚本的用途
3. 为公共方法和属性添加注释
4. 相关功能的脚本应放在同一个子文件夹中
5. 如果创建新的子系统，请创建相应的子文件夹并添加README.md文件

### 代码风格

- 使用GDScript的内置类型标注
- 使用有意义的变量和函数名
- 遵循Godot的信号系统进行事件处理
- 尽量使用Godot的内置功能而不是自定义实现